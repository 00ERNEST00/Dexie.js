{"version":3,"sources":["dexie-observable.js"],"names":["global","factory","exports","module","require","define","amd","Dexie","Observable","this","nop","promisableChain","f1","f2","res","apply","arguments","then","thiz","args","createUUID","d","Date","now","replace","c","r","Math","random","floor","toString","hasOwnProperty","CREATE","UPDATE","DELETE","initCrudMonitor","db","table","hook","_observing","tableName","name","subscribe","primKey","obj","trans","rv","undefined","schema","uuid","keyPath","setByKeyPath","change","source","key","type","promise","_changes","add","rev","_lastWrittenRevision","max","onsuccess","resultKey","_then","put","onerror","delete","initCreatingHook","mods","oldObj","modsWithoutUndefined","anythingChanged","newObj","deepClone","propPath","mod","delByKeyPath","currentValue","getByKeyPath","JSON","stringify","initUpdatingHook","catch","e","console","log","stack","initDeletingHook","Promise","initIntercomm","SyncNode","mySyncNode","localStorage","requestsWaitingForReply","consumeIntercommMessages","node","ignoreTransaction","transaction","_intercomm","where","destinationNode","id","toArray","messages","forEach","msg","request","requestId","isFailure","reject","message","error","resolve","result","observable","sendMessage","sender","on","fire","consumeMessage","anyOf","map","DatabaseClosedError","options","wantReply","extend","tables","push","_syncNodes","equals","count","receiverAlive","above","first","masterNode","messageId","setItem","intercomm","broadcastMessage","bIncludeSelf","mySyncNodeId","nodes","all","filter","onIntercomm","dbname","overrideParseStoresSpec","origFunc","stores","dbSchema","call","Object","keys","indexOf","substr","self","DatabaseChange","defineClass","Number","String","override","Promise$1","browserIsShuttingDown","test","version","Error","NODE_TIMEOUT","HIBERNATE_GRACE_PERIOD","LOCAL_POLL","HEARTBEAT_INTERVAL","localStorageImpl","myRevision","lastHeartBeat","deleteTimeStamp","url","isMaster","syncProtocol","syncContext","syncOptions","connected","status","appliedRemoteRevision","remoteBaseRevisions","local","remote","dbUploadState","tablesToUpload","currentTable","currentKey","localBaseRevision","wakeupObservers","lastWrittenRevision","latestRevision","initWakeupObservers","overrideCreateTransaction","mode","storenames","dbschema","parent","dynamicallyOpened","addChanges","some","storeName","slice","rootTransaction","findRootTransaction","timeoutHandle","clearTimeout","setTimeout","initOverrideCreateTransaction","crudMonitor","overrideOpen","origOpen","_allTables","mapToClass","initOverrideOpen","defineProperty","get","pollHandle","heartbeatHandle","fake","_uncommittedChanges","Version","prototype","_parseStoresSpec","addEventType","changes","cleanup","_createTransaction","open","close","origClose","unsubscribe","onLatestRevisionIncremented","onSuicide","onBeforeUnload","suicideNurseCall","origDelete","orderBy","last","lastChange","latestRevisionIncremented","currentMaster","poll","heartbeat","handledRevision","vip","readChanges","recursion","wasPartial","ongoingOperation","partial","ourSyncNode","limit","length","ourNodeStillExists","modify","syncNode","location","reload","finally","currentInstance","isOpen","weBecameMaster","below","value","removeItem","update","deleteOldChanges","wereTheOneDying","nodeID","Events","oldestNode","primaryKeys","keysToDelete","bulkDelete","_onStorage","event","parts","split","prop","parseInt","newValue","isNaN","_onBeforeUnload","beforeunload","ex","addEventListener","addons"],"mappings":"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"}